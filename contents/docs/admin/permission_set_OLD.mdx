---
title: 管理数据访问权限OLD
description: 控制谁可以看到什么内容？华炎魔方通过以下功能实现：简档、权限集、对象权限、页面布局、共享规则。
---

[查看视频简介 >](/embed/videos/authority_management)

华炎魔方基于权限集为每一个对象设置权限，支持公司级、记录级和字段级的权限控制。

## 简档

简档，是华炎魔方新增加的权限集合，作为用户的必选字段，每个新建的用户只可以属于一个简档，是授予某一类型用户对各种对象和功能的访问权限的设置和权限集合。简单来说，简档就像圈子，具有相同职能的用户在同一个圈子里。例如营销人员、采购人员都可以设置有对应的简档。

### 标准简档

系统内置四个简档：admin, user，supplier，customer，分别对应“管理员”、“用户”、“供应商”和“客户”。

* admin 是管理员简档，工作区管理员设置此简档
* user 是普通用户简档，所有员工都设置此简档
* supplier 是供应商类型用户简档，外部用户如供应商人员属于此简档
* customer 是客户类型用户简档，可设置客户用户为此简档

### 自定义简档

例如，新增供应商用户，简档设置为“供应商”，需要有审批和设置权限，则管理员需要将系统内置简档“供应商”设置为自定义，并在简档中配置授权访问的应用，以及调整对象权限。如果内置简档无法满足需要，管理员还可以新建简档，配置您需要的各种属性。

具体的用户简档配置页面如下：

* “设置-公司设置-用户”，新建/修改人员信息，在“简档”字段，选择对应的简档选项，默认显示系统内置4个简档，普通员工选择“用户”即可。

 ![](https://console.steedos.cn/api/files/images/4RMg656jvr7NpeAmv)

* “设置-公司设置-简档”，点击“供应商”进入详细页，点击右上角“自定义”，授权应用选择“流程审批系统”和“设置”，并且对象权限新建一条记录“审批”对象，勾选允许创建和允许查看，即完成供应商简档的权限设置。

 ![](https://console.steedos.cn/api/files/images/C3tghyxyp69sMdWYe)

### 密码策略

简档中新增了密码策略功能，可以设置强制密码历史、最大无效登录尝试次数以及锁定有效期间，如果所示：

 ![](https://console.steedos.cn/api/files/images/XT3nKCDe9xo3c3sBG)

#### 强制密码历史

密码的重复使用是一个重要问题，在确定了新密码与具体数量的旧密码不同之后才可以重复使用旧密码。 许多用户希望在很长一段时间内重复使用其帐户的相同密码。 一个特定帐户使用的密码越久, 被攻击破解的可能性就越大。 如果用户在更改密码时, 使用了旧密码, 则安全性将降低。

#### 最大无效登录尝试次数

设置确定将导致用户帐户被锁定的登录失败次数。

#### 锁定有效期间

设置确定锁定帐户在自动解锁之前保持锁定的分钟数。

#### 解除锁定

管理员可以给普通用户解除锁定，进入“设置-公司设置-人员“页面，选择指定的用户，进入详情页面，点击右上角“锁定”或“解除锁定”按钮，即可完成该用户的锁定与解除锁定。

> 如果是管理员账户被锁定后。则需要修改数据库users中管理员记录的lockout属性值为false才可以解除锁定。

### 如何修改标准简档

点击标准简档显示名称，可以看到右上角的自定义按钮，点击此按钮即可进入待编辑状态。这样，您就可以和自定义简档一样，可以根据实际需求进行修改简档的属性，包括授权应用、密码策略等。

## 权限集

权限集，与简档相似，是另一种权限集合，也是授予某一类的用户对各种对象和功能的访问权限的集合。但是，每个用户可以属于多个权限集，这是与简档的主要区别。

一般来说，简档是为大类用户配置基本权限，而权限集则可为小类用户扩展更多的功能访问权限。 华炎魔方里的每个用户，都会属于1个简档，也可能同时再属于1个或多个权限集。对系统管理员而言，再用户创建之后，用户属于哪个简档一般无需调整，更多的是对用户属于哪些权限集作适时的调整。

假设您在贵组织中拥有“库存”自定义对象。许多用户需要此对象的“读取”访问权限，而少数用户则需要“编辑”访问权限。您可以创建授予“读取”访问权限的权限集，并将其分配到适用用户。然后，您可以创建另一个权限集，可授予“库存”对象的“编辑”访问权限，并将其分配到人数较少的用户组。

### 标准权限集

华炎魔方有几个内置权限集：organization_admin, workflow_admin, none

* organization_admin： 是默认的组织管理员权限集，该权限集内的用户，对其主分部下的部门、用户具有管理权限，相当于是分部的系统管理员。
* workflow_admin ：是默认的流程管理员权限集，该权限集内用户，对其所属分部下的审批流程的相关对象，具有管理权限，相当于是分部的流程管理员。
* none:表示最小的一个权限集，表示属于此权限集的用户对某些应用或者对象没有相关权限。

用户可以属于多个权限集，当用户同时属于多个权限集时，最终用户的权限为其在各权限集中的权限叠加。

管理员还可以在权限集中配置授权访问的应用。

### 如何创建自定义权限集？

点击公司设置-权限集，点击新建按钮，输入合适的API名称和显示名称，类别选择权限集。同简档一样，权限集也有两种关联的许可证，内部用户选择platform,外部用户选择community，选择需要授权的应用，成员一栏选择您将要授权的成员。

 ![](https://console.steedos.cn/api/files/images/PRrbCXHiuJZimdtnB)

### 如何修改标准权限集？

点击权限集列表下的显示名称进入详情页，点击右上角自定义按钮进入可编辑状态，点击编辑即可根据需求进行更改。

### 简档与权限集的异同

简档与权限集都能为不同的用户配置权限，对用户进行归类。两者的区别在于，简档好比是为用户确定一个身份，因此一个用户只能属于一个简档。而权限集能够为用户配置更多的权限，一个用户可以拥有不止一个权限集，比如可以为财务人员设置一个管理合同的权限。

## 对象权限

对象的操作权限包括查看、创建、编辑、删除。举例来说，当用户点击“删除”按钮时，系统会校验用户所属简档和权限集下的所有对象权限的设置：如果对当前对象有“删除”的操作权限，则可以进行下一步操作；反之则不能继续操作。

\
**哪里可以设置对象权限？**

在简档和权限集里，都可以设置对象权限。 在权限集里，点击某权限集名称、进入详情页，在对象权限一栏，点击具体对象后面的下拉框即可进行权限设置。对简档进行设置，也是同样的方式。

\
**如何创建对象权限？**

在简档和权限集，点击显示名称进入详情页，在对象权限右上角可以看到新建按钮，点击即可进行创建。 在权限集输入框选择将要授权的权限集，选择将要授权的对象，设定某类用户对特定对象的所拥有的操作权限。

 ![](https://console.steedos.cn/api/files/images/Qkkk7muQTK9mQ6JmA)

* **允许查看** 勾选后，supplier可以查看合同对象相关信息。
* **允许创建** 勾选后，supplier有权限在合同对象里面创建一条合同记录。
* **允许编辑** 勾选后，supplier有权限对合同信息进行编辑。
* **允许删除** 勾选后，supplier有删除合同对象的权限。
* **查看所有记录** 勾选后，supplier可以查看所有的合同记录，通常可以为管理员配置此权限。
* **修改所有记录** 勾选后，supplier可以修改所有的合同记录，通常可以为管理员配置此权限。
* **查看本分部** 勾选后，supplier只能查看所属分部的合同记录，普通用户通常设置为此权限。
* **修改本分部** 勾选后，supplier只能修改本分部的合同记录，普通用户通常设置为此权限。

以上各对象权限选项的意义也可以参考此图。

 ![](https://console.steedos.cn/api/files/images/mu25NaG96reg7zxha)

* **禁用列表视图** 启用后，将不能看到对象的这些列表视图。例如，普通用户可以禁用“所有记录”这一项，而只展示“我的记录”这一项列表视图。
* **禁用操作** 启用后，将不显示对象的操作按钮，也就不可以进行这些操作。例如，可以对普通用户禁用“发起审批”操作。
* **不可见字段** 用于隐藏对象的某些敏感字段。比如，对普通用户隐藏合同对象的“合同金额”字段后，这些用户访问合同记录时，将不会显示“合同金额”字段。
* **不可编辑字段** 对某个字段启用了不可编辑后，即不能对该字段进行编辑修改。比如对合同对象设置了不能编辑“名称”字段后，用户就不能修改合同的“名称”了。
* **禁用关联对象** 启用后，相关联的对象将不会被启用。比如可以禁用合同里面的付款或者附件对象。

\
**权限叠加规则**

虽然每个用户只属于一个简档，但是可能同时属于多个权限集，当一个用户属于多个权限集时，实际拥有的权限为各权限集权限的叠加。权限叠加规则请参考下图。

 ![](https://console.steedos.cn/api/files/images/wYeJQGXkkgPqRicDx)

**如何撤销用户权限**

如果要撤销某个用户的权限，一般有两种方式：一是在简档或是权限集里面，把对象权限的范围缩小，比如不允许创建、不允许编辑或删除等，但这样做，同时也缩小了属于此简档的其他用户的权限。第二种是把这个用户移出权限集，再重新为他配置特定的权限集权限。

## 共享规则

通过配置共享规则（permission share)，共享将满足一定过滤条件的记录，共享给指定用户。此功能叠加到用户原有权限上，实现特殊需求下权限的扩展。

### 参数

#### 规则名称 name

共享规则的名称，用于区分不同的共享规则。

#### 对象名 object_name

共享规则对应的业务对象。

#### 过滤条件 filters

符合指定过滤条件的记录，才适用此共享规则。语法参考[过滤条件](https://www.steedos.cn/docs/developer/object_filter)。

#### 授权用户 users

授权给指定用户。

#### 授权组织 organizations

授权给指定组织，对应组织及所有下级组织中的用户均使用此规则。

#### 权限 permissions

数组格式，有两个可选项：

* allowRead 对符合查询条件的记录有只读权限。
* allowEdit 对符合查询条件的记录可以查看和修改，但是不能删除。

\
