---
title: 自定义对象
description: 对象对应的是数据库的表。我们也可以把对象当作是一个业务分类来理解，如“合同(contract)”这个业务分类，具体到“XXX产品服务合同”就是“合同(contract)”这个业务分类的一条数据。
---

## 创建自定义对象

管理员登录进入系统后点击右上角的“⚙”--“设置”进入设置界面，当我们需要创建自定义对象时点击“对象设置”->"对象”界面右上角的“新建”按钮。

 ![](https://console.steedos.cn/api/files/images/Tadsy6eNHKtnYGHRW)

* **数据源**：选择该对象所属数据源，该对象的数据将保存到指定数据源中，默认数据源使用的是mongodb数据库。
* **显示名**：界面上将显示该名称来表示该对象。
* **API名称**：字段唯一标识符，只能包含小写字母、数字，必须以字母开头，不能以下划线字符结尾或包含两个连续的下划线字符。
* **图标：** 为您的对象选择合适的图标。
* **开发状态**：此对象的开发状态，“开发中”的对象只有管理员才可以访问，当对象相关功能已经就绪时，您应该把它设置为“已部署”。
* **备注**：输入此对象的描述。
* **外部数据源**：引用第三方数据库的数据。
* **功能开关**：设置此对象上开放的功能，勾选表示开启相关功能。
* **脚本**：表单事件的脚本，例如：在“数据变化时”中添加脚本实现字段级联（联动）效果。

## 对象功能开关

* **允许搜索**：此对象可以通过全局检索查询。
* **允许上传附件**：此对象可以上传附件。
* **允许添加任务**：此对象中的业务数据，可以添加任务。
* **允许添加备注**：此对象中的业务数据，可以添加备忘。
* **允许添加事件**：此对象中的业务数据，可以添加任务。
* **允许共享记录**：启用此功能可以设置该对象对于其他对象的记录共享。
* **允许配置对象流程**：只有启用此功能的业务对象，才能显示在对象流程的配置菜单中。
* **允许查看申请单**：此对象中的业务数据，可以进行审批。
* **允许添加留言**：用户对数据可以添加留言。
* **记录字段历史**：启用此功能后系统会自动记录此字段的修改记录。
* **允许编辑单个字段**：只有启用此功能的业务对象，才能单个编辑字段数据。
* **启用树状结构显示记录**：当启用时，与此对象关联的查找字段将以树状结构的形式显示其选项。
* **启用弹出窗口查找模式**：当启用时，与此对象关联的查找字段将以弹出窗口的形式显示其选项。

## 设置对象字段

新建对象后，您需要进一步描述该对象有哪些属性，比如对于 “报价(offer)” 对象，您可能希望新建“报价编号(offer_id)“、”到期日期(offer_date)“、”报价名称(offer_name)“等字段。


### 自定义字段

新建的对象，默认只有几个内置字段，如“名称(name)”、“所有者(owner)”、“创建人(created_by)”、“修改人(modified_by)”。例如我们需要添加一个 ”报价名称” 字段，点击右上角的 “新建” 按钮弹出 “编辑 对象字段”窗口，填写必填项显示名称 ”报价名称“ 、字段名 “offer_name” 、字段类型 “文本”，点击提交即完成一个字段的创建。

 ![](https://console.steedos.cn/api/files/images/vj7CJWqxyWy2sGcMG)

* **所属对象**：该字段所属对象，默认为当前对象。
* **显示名称**：字段最终显示的名称，由用户自定义。
* **字段名**：用来保存到数据库的字段名称，名称只能包含小写字母，数字，必须以字母开头。不能以下划线结尾或包含两个连续的下划线符号。
* **字段类型**：根据需求设置该字段的类型。
* **默认值**：设定字段的默认值，可以是固定值。
* **字段分组**：在记录的显示页面和编辑页面，将字段分组显示。
* **外部数据源**：引用第三方数据库的数据。
* **高级**：字段功能设置，比如该字段设置为必填。

### 字段显示公式

在高级-字段显示公式：该字段增加显示条件，示例：`{{formData.type__c === 'leader' ? true: false}}`，当字段type__c等于leader值时，才显示当前字段，否则隐藏该字段。

### 与关联表建立联系

以“报价(offer)”对象为例，我们可能希望描述每份报价关联客户是谁，此时我们可以新建一个“客户(client)”对象与之关联，关于如何创建业务对象关联的方法请阅览[相关表字段类型](/docs/admin/field_type#%E7%9B%B8%E5%85%B3%E8%A1%A8%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B)

### 建立主表/子表关系

在相关表字段的基础上，可以额外设置两个对象间的主表/子表关系，比如 “报价(offer)” 中可能需要引用 ”业务机会“ 对象，字段类型设置为主表/子表，引用 “业务机会“ 对象 。使用方法和相关表一样，区别在于设置为主表/子表类型的字段可以在“相关子表”里设置关联子表显示的列。有关如何使用的详情信息请阅览[主表/子表字段类型](/docs/admin/field_type#%E4%B8%BB%E8%A1%A8%E5%AD%90%E8%A1%A8%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B)

## 配置列表视图

列表视图是用来定义前台数据列表展示的数据，您可以自定义需要显示的字段，从不同的维度定义视图展示不一样的数据，设定筛选条件和排序规则等参数。例如“报价(offer)”对象，您可能希望有一个“我的报价”列表视图来展示“报价编号(offer_id)”、“报价名称(offer_name)”、“报价客户(offer_client)”、“状态(state)”等多个数据。用户在界面上可以很方便快捷的切换列表视图、添加筛选条件、查找数据、新建视图等等。[如何自定义列表视图](/docs/admin/create_object#%E5%88%97%E8%A1%A8%E8%A7%86%E5%9B%BE)

## 配置按钮

每个对象内置了在一定条件下才会显示的基础按钮，例如: 新建、编辑按钮。您也可以给指定对象配置自定义操作按钮。从”设置 => 对象设置 => 对象“进入指定的对象设置详情页， 然后找到操作按钮子表，点击右上角新建按钮，输入显示名称、API名称等后点击提交即可。

其中执行的脚本需要按照以下格式要求填写脚本代码，所有脚本都应该写入一个 `function`函数体内。

```javascript
function(object_name, record_id){
  // 在这里补充按钮点击事件业务需求脚本。
  // object_name : 对象名
  // record_id   : 记录ID 
}
```

* **当按钮显示记录详细页**：可以调用 `this.record` 、`Creator.getObjectRecord()` 获取当前记录信息。
* **当按钮显示在列表上**：可以调用 `gridRef.current.api.getSelectedRows()` 获取当前选中的记录。
